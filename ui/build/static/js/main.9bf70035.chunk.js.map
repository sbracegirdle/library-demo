{"version":3,"sources":["useBooks.js","styledComponents.js","App.js","index.js"],"names":["useBooks","useState","books","setBooks","hasError","setHasError","useEffect","fetch","then","res","json","catch","createBook","useCallback","book","a","async","method","headers","body","JSON","stringify","status","concat","Error","deleteBook","isbn","filter","styled","classes","El","defaultProps","props","classValues","length","v","join","className","getInputStyles","mandatory","value","children","getButtonStyles","sm","disabled","primary","inverted","Button","LinkButton","Link","TextInput","type","TextArea","Card","Message","FormCell","Label","Mandatory","CreateBookForm","title","setTitle","author","setAuthor","synopsis","setSynopsis","setISBN","year","setYear","submitted","setSubmitted","to","undefined","onChange","e","target","label","onClick","LibraryLink","AppShell","BookCard","App","path","map","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9bf70035.chunk.js","sourcesContent":["import {useState, useCallback, useEffect} from 'react';\n\nconst useBooks = () => {\n  const [books, setBooks] = useState([]);\n  const [hasError, setHasError] = useState(null);\n\n  useEffect(\n    () =>\n      fetch('/api/v1/book')\n        .then(res => res.json())\n        .then(setBooks)\n        .catch(setHasError),\n    []\n  );\n\n  const createBook = useCallback(\n    async book => {\n      const response = await fetch('/api/v1/book', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(book)\n      });\n      if (response.status < 400) {\n        setBooks(books.concat(book));\n      } else {\n        throw Error('Unexpected error creating book');\n      }\n    },\n    [books, setBooks]\n  );\n\n  const deleteBook = useCallback(\n    async isbn => {\n      if (!isbn) throw Error('Book has no isbn, cannot delete.');\n\n      const response = await fetch(`/api/v1/book/${isbn}`, {\n        method: 'DELETE'\n      });\n      if (response.status < 400) {\n        setBooks(books.filter(book => book.isbn !== isbn));\n      } else {\n        throw Error('Unexpected error creating book');\n      }\n    },\n    [books, setBooks]\n  );\n\n  return {books, createBook, deleteBook, hasError, setHasError};\n};\n\nexport default useBooks;\n","import React from 'react';\nimport {Link} from 'react-router-dom';\n\nexport const styled = (classes, El = 'div', defaultProps) => props => {\n  let classValues = typeof classes === 'function' ? classes(props) : classes;\n  if (typeof classValues === 'object' && classValues.length) classValues = classValues.filter(v => !!v).join(' ');\n\n  return <El {...defaultProps} {...props} className={`${classValues || ''} ${props.className || ''}`} />;\n};\n\nconst getInputStyles = props => [\n  'Input rounded border px-2 py-1 active:border-green',\n  props.mandatory && !props.value && !props.children ? 'border-red' : 'border-gray-200'\n];\n\nconst getButtonStyles = ({sm, disabled, primary, inverted}) => [\n  'Button inline-block rounded border text-white',\n  sm ? 'px-1 py-1 text-sm' : 'px-2 py-1',\n  disabled && 'opacity-50 cursor-not-allowed',\n  // Primary styles\n  primary && !inverted && 'border-green bg-gray-700',\n  primary && !inverted && !disabled && 'hover:text-gray-700 hover:bg-green',\n  primary && inverted && 'border-green bg-green',\n  primary && inverted && !disabled && 'hover:text-green hover:bg-gray-700',\n  // Non-primary styles\n  !primary && !inverted && 'border-gray-300 bg-gray-700',\n  !primary && !inverted && !disabled && 'hover:text-gray-700 hover:bg-gray-300',\n  !primary && inverted && 'border-gray-300 bg-gray-300',\n  !primary && inverted && !disabled && 'hover:text-gray-300 hover:bg-gray-700'\n];\n\nexport const Button = styled(getButtonStyles, 'button');\nexport const LinkButton = styled(getButtonStyles, Link);\nexport const TextInput = styled(getInputStyles, 'input', {type: 'text'});\nexport const TextArea = styled(getInputStyles, 'textarea');\nexport const Card = styled('Card bg-cream text-black p-2 rounded');\nexport const Message = styled('Message bg-cream text-black p-2 rounded');\nexport const FormCell = styled('FormCell px-2 py-1 flex flex-col items-stretch', 'label');\nexport const Label = styled('Label text-black text-sm mr-1 mb-1 cursor-pointer');\nexport const Mandatory = styled('Mandatory text-red ml-1', 'span', {children: '*'});\n","import React, {useState} from 'react';\nimport {BrowserRouter as Router, Switch, Route, Link, Redirect} from 'react-router-dom';\nimport useBooks from './useBooks';\nimport {Button, LinkButton, Card, TextInput, TextArea, Message, FormCell, Label, Mandatory} from './styledComponents';\n\nconst CreateBookForm = ({createBook}) => {\n  const [title, setTitle] = useState('');\n  const [author, setAuthor] = useState('');\n  const [synopsis, setSynopsis] = useState('');\n  const [isbn, setISBN] = useState('');\n  const [year, setYear] = useState('');\n  const [submitted, setSubmitted] = useState(false);\n\n  const submitForm = () => {\n    createBook({title, author, synopsis: synopsis, isbn, year: year || undefined});\n    setSubmitted(true);\n  };\n\n  return (\n    <>\n      {submitted ? <Redirect to=\"/\" /> : undefined}\n      <Card className=\"flex flex-row flex-wrap\">\n        <FormCell className=\"w-9/12\">\n          <Label>\n            Title\n            <Mandatory />\n          </Label>\n          <TextInput mandatory value={title} onChange={e => setTitle(e.target.value)} />\n        </FormCell>\n        <FormCell className=\"w-9/12\">\n          <Label>\n            Author\n            <Mandatory />\n          </Label>\n          <TextInput mandatory value={author} onChange={e => setAuthor(e.target.value)} />\n        </FormCell>\n        <FormCell className=\"w-full\">\n          <Label>Synopsis</Label>\n          <TextArea onChange={e => setSynopsis(e.target.value)}>{synopsis}</TextArea>\n        </FormCell>\n        <FormCell className=\"w-6/12\" label=\"ISBN\" mandatory>\n          <Label>\n            ISBN\n            <Mandatory />\n          </Label>\n          <TextInput mandatory value={isbn} onChange={e => setISBN(e.target.value)} />\n        </FormCell>\n        <FormCell className=\"w-6/12\" label=\"Year\">\n          <Label>Year</Label>\n          <TextInput value={year} onChange={e => setYear(e.target.value)} />\n        </FormCell>\n      </Card>\n      <div className=\"my-2\">\n        <Button primary className=\"mr-2\" onClick={submitForm} disabled={!title || !author || !isbn}>\n          Submit\n        </Button>\n        <LinkButton to=\"/\">Cancel</LinkButton>\n      </div>\n    </>\n  );\n};\n\nconst LibraryLink = props => <Link {...props} className=\"text-blue cursor-pointer hover:underline\" />;\n\nconst AppShell = ({title, children}) => (\n  <div className=\"AppShell w-screen min-h-screen bg-gunmetal font-body text-cream p-2 sm:p-2 md:p-2 lg:p-4 xl:p-4 \">\n    <main className=\"w-full xl:w-6/12 mx-auto\">\n      <div className=\"AppShell-header flex my-2 flex-col sm:flex-col md:flex-col lg:flex-row xl:flex-row items-baseline\">\n        <h1 className=\"text-4xl text-green font-light font-display mr-2 cursor-pointer\">\n          <Link to=\"/\">My Library App</Link>\n        </h1>\n        <h1 className=\"text-xl text-gray-200 \">{title}</h1>\n      </div>\n      {children}\n    </main>\n  </div>\n);\n\nconst BookCard = ({title, author, year, isbn, synopsis, deleteBook}) => {\n  return (\n    <Card className=\"BookCard my-2\">\n      <div className=\"flex flex-col md:flex-row items-start md:items-center\">\n        <div className=\"flex-1\">\n          <div className=\"BookCard-title font-bold\">{title}</div>\n          <div className=\"text-sm text-gray-400 mt-1\">{synopsis}</div>\n        </div>\n        <div className=\"BookCard-meta text-sm flex flex-col my-2 md:my-0 md:mx-3\">\n          <div>{author}</div>\n          <div>{year}</div>\n          <div>{isbn}</div>\n        </div>\n        <div className=\"my-2 md:my-0 md:mx-3\">\n          <Button primary inverted sm onClick={() => deleteBook(isbn)}>\n            Remove\n          </Button>\n        </div>\n      </div>\n    </Card>\n  );\n};\n\nfunction App() {\n  const {books, createBook, deleteBook, hasError} = useBooks();\n\n  if (hasError)\n    return (\n      <Router>\n        <AppShell title=\"Error page\">Could not load the list of books.</AppShell>\n      </Router>\n    );\n\n  return (\n    <Router>\n      <AppShell\n        title={\n          <Switch>\n            <Route path=\"/create\">Create a book</Route>\n            <Route path=\"/\">Available books</Route>\n          </Switch>\n        }>\n        <Switch>\n          <Route path=\"/create\">\n            <CreateBookForm createBook={createBook} />\n          </Route>\n          <Route path=\"/\">\n            {books && books.length ? (\n              books.map(book => <BookCard {...book} deleteBook={deleteBook} />)\n            ) : (\n              <Message>\n                No books available, please <LibraryLink to=\"/create\">add</LibraryLink> one\n              </Message>\n            )}\n            <div className=\"my-2\">\n              <LinkButton to=\"/create\" primary className=\"mr-2\">\n                Add a book\n              </LinkButton>\n            </div>\n          </Route>\n        </Switch>\n      </AppShell>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}