(this["webpackJsonplibrary-ui"]=this["webpackJsonplibrary-ui"]||[]).push([[0],{19:function(e,t,a){e.exports=a(31)},24:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(16),c=a.n(l),o=(a(24),a(5)),s=a(6),m=a(7),u=a(10),i=a.n(u),b=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(null),c=Object(o.a)(l,2),s=c[0],m=c[1];Object(r.useEffect)((function(){return fetch("/api/v1/book").then((function(e){return e.json()})).then(n).catch(m)}),[]);var u=Object(r.useCallback)((function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(fetch("/api/v1/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}));case 2:if(!(t.sent.status<400)){t.next=7;break}n(a.concat(e)),t.next=8;break;case 7:throw Error("Unexpected error creating book");case 8:case"end":return t.stop()}}))}),[a,n]),b=Object(r.useCallback)((function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw Error("Book has no isbn, cannot delete.");case 2:return t.next=4,i.a.awrap(fetch("/api/v1/book/".concat(e),{method:"DELETE"}));case 4:if(!(t.sent.status<400)){t.next=9;break}n(a.filter((function(t){return t.isbn!==e}))),t.next=10;break;case 9:throw Error("Unexpected error creating book");case 10:case"end":return t.stop()}}))}),[a,n]);return{books:a,createBook:u,deleteBook:b,hasError:s,setHasError:m}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",a=arguments.length>2?arguments[2]:void 0;return function(r){var l="function"===typeof e?e(r):e;return"object"===typeof l&&l.length&&(l=l.filter((function(e){return!!e})).join(" ")),n.a.createElement(t,Object.assign({},a,r,{className:"".concat(l||""," ").concat(r.className||"")}))}},E=function(e){return["Input rounded border px-2 py-1 active:border-green",!e.mandatory||e.value||e.children?"border-gray-200":"border-red"]},f=function(e){var t=e.sm,a=e.disabled,r=e.primary,n=e.inverted;return["Button inline-block rounded border text-white",t?"px-1 py-1 text-sm":"px-2 py-1",a&&"opacity-50 cursor-not-allowed",r&&!n&&"border-green bg-gray-700",r&&!n&&!a&&"hover:text-gray-700 hover:bg-green",r&&n&&"border-green bg-green",r&&n&&!a&&"hover:text-green hover:bg-gray-700",!r&&!n&&"border-gray-300 bg-gray-700",!r&&!n&&!a&&"hover:text-gray-700 hover:bg-gray-300",!r&&n&&"border-gray-300 bg-gray-300",!r&&n&&!a&&"hover:text-gray-300 hover:bg-gray-700"]},p=d(f,"button"),x=d(f,m.b),g=d(E,"input",{type:"text"}),v=d(E,"textarea"),h=d("Card bg-cream text-black p-2 rounded"),y=d("Message bg-cream text-black p-2 rounded"),k=d("FormCell px-2 py-1 flex flex-col items-stretch","label"),N=d("Label text-black text-sm mr-1 mb-1 cursor-pointer"),j=d("Mandatory text-red ml-1","span",{children:"*"}),w=function(e){var t=e.createBook,a=Object(r.useState)(""),l=Object(o.a)(a,2),c=l[0],m=l[1],u=Object(r.useState)(""),i=Object(o.a)(u,2),b=i[0],d=i[1],E=Object(r.useState)(""),f=Object(o.a)(E,2),y=f[0],w=f[1],O=Object(r.useState)(""),C=Object(o.a)(O,2),B=C[0],S=C[1],A=Object(r.useState)(""),I=Object(o.a)(A,2),T=I[0],J=I[1],L=Object(r.useState)(!1),M=Object(o.a)(L,2),F=M[0],U=M[1];return n.a.createElement(n.a.Fragment,null,F?n.a.createElement(s.a,{to:"/"}):void 0,n.a.createElement(h,{className:"flex flex-row flex-wrap"},n.a.createElement(k,{className:"w-9/12"},n.a.createElement(N,null,"Title",n.a.createElement(j,null)),n.a.createElement(g,{mandatory:!0,value:c,onChange:function(e){return m(e.target.value)}})),n.a.createElement(k,{className:"w-9/12"},n.a.createElement(N,null,"Author",n.a.createElement(j,null)),n.a.createElement(g,{mandatory:!0,value:b,onChange:function(e){return d(e.target.value)}})),n.a.createElement(k,{className:"w-full"},n.a.createElement(N,null,"Synopsis"),n.a.createElement(v,{onChange:function(e){return w(e.target.value)}},y)),n.a.createElement(k,{className:"w-6/12",label:"ISBN",mandatory:!0},n.a.createElement(N,null,"ISBN",n.a.createElement(j,null)),n.a.createElement(g,{mandatory:!0,value:B,onChange:function(e){return S(e.target.value)}})),n.a.createElement(k,{className:"w-6/12",label:"Year"},n.a.createElement(N,null,"Year"),n.a.createElement(g,{value:T,onChange:function(e){return J(e.target.value)}}))),n.a.createElement("div",{className:"my-2"},n.a.createElement(p,{primary:!0,className:"mr-2",onClick:function(){t({title:c,author:b,synopsis:y,isbn:B,year:T||void 0}),U(!0)},disabled:!c||!b||!B},"Submit"),n.a.createElement(x,{to:"/"},"Cancel")))},O=function(e){return n.a.createElement(m.b,Object.assign({},e,{className:"text-blue cursor-pointer hover:underline"}))},C=function(e){var t=e.title,a=e.children;return n.a.createElement("div",{className:"AppShell w-screen min-h-screen bg-gunmetal font-body text-cream p-2 sm:p-2 md:p-2 lg:p-4 xl:p-4 "},n.a.createElement("main",{className:"w-full xl:w-6/12 mx-auto"},n.a.createElement("div",{className:"AppShell-header flex my-2 flex-col sm:flex-col md:flex-col lg:flex-row xl:flex-row items-baseline"},n.a.createElement("h1",{className:"text-4xl text-green font-light font-display mr-2 cursor-pointer"},n.a.createElement(m.b,{to:"/"},"My Library App")),n.a.createElement("h1",{className:"text-xl text-gray-200 "},t)),a))},B=function(e){var t=e.title,a=e.author,r=e.year,l=e.isbn,c=e.synopsis,o=e.deleteBook;return n.a.createElement(h,{className:"BookCard my-2"},n.a.createElement("div",{className:"flex flex-col md:flex-row items-start md:items-center"},n.a.createElement("div",{className:"flex-1"},n.a.createElement("div",{className:"BookCard-title font-bold"},t),n.a.createElement("div",{className:"text-sm text-gray-400 mt-1"},c)),n.a.createElement("div",{className:"BookCard-meta text-sm flex flex-col my-2 md:my-0 md:mx-3"},n.a.createElement("div",null,a),n.a.createElement("div",null,r),n.a.createElement("div",null,l)),n.a.createElement("div",{className:"my-2 md:my-0 md:mx-3"},n.a.createElement(p,{primary:!0,inverted:!0,sm:!0,onClick:function(){return o(l)}},"Remove"))))};var S=function(){var e=b(),t=e.books,a=e.createBook,r=e.deleteBook;return e.hasError?n.a.createElement(m.a,null,n.a.createElement(C,{title:"Error page"},"Could not load the list of books.")):n.a.createElement(m.a,null,n.a.createElement(C,{title:n.a.createElement(s.d,null,n.a.createElement(s.b,{path:"/create"},"Create a book"),n.a.createElement(s.b,{path:"/"},"Available books"))},n.a.createElement(s.d,null,n.a.createElement(s.b,{path:"/create"},n.a.createElement(w,{createBook:a})),n.a.createElement(s.b,{path:"/"},t&&t.length?t.map((function(e){return n.a.createElement(B,Object.assign({},e,{deleteBook:r}))})):n.a.createElement(y,null,"No books available, please ",n.a.createElement(O,{to:"/create"},"add")," one"),n.a.createElement("div",{className:"my-2"},n.a.createElement(x,{to:"/create",primary:!0,className:"mr-2"},"Add a book"))))))};c.a.render(n.a.createElement(S,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.9bf70035.chunk.js.map